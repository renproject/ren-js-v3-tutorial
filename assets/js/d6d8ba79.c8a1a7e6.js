"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8869],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),u=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=u(e.components);return a.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=u(t),m=r,b=d["".concat(s,".").concat(m)]||d[m]||p[m]||o;return t?a.createElement(b,l(l({ref:n},c),{},{components:t})):a.createElement(b,l({ref:n},c))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=d;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var u=2;u<o;u++)l[u]=t[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},85903:function(e,n,t){t.r(n),t.d(n,{contentTitle:function(){return p},default:function(){return f},frontMatter:function(){return c},metadata:function(){return d},toc:function(){return m}});var a=t(87462),r=t(63366),o=(t(67294),t(3905)),l=t(26396),i=t(58215),s=t(93454),u=["components"],c={title:"2. React UI",slug:"/tutorial/react-ui"},p=void 0,d={unversionedId:"v2/tutorial/react-ui",id:"v2/tutorial/react-ui",title:"2. React UI",description:"This chapter will setup a React app so that we can have a simple user interface for interacting with RenVM and the npm contract that we deployed in Part 1. We will assume some level of knowledge about React, so head over to https://reactjs.org/tutorial/tutorial.html if you haven't used React before.",source:"@site/ren-js/v2/tutorial/2-react-ui.mdx",sourceDirName:"v2/tutorial",slug:"/tutorial/react-ui",permalink:"/ren-client-docs/ren-js/tutorial/react-ui",editUrl:"https://github.com/renproject/ren-client-docs/edit/master/ren-js/v2/tutorial/2-react-ui.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"2. React UI",slug:"/tutorial/react-ui"},sidebar:"docs",previous:{title:"1. Smart Contract",permalink:"/ren-client-docs/ren-js/tutorial/smart-contract"},next:{title:"3. RenJS",permalink:"/ren-client-docs/ren-js/tutorial/ren-js"}},m=[{value:"Create React App",id:"create-react-app",children:[],level:3},{value:"App.js",id:"appjs",children:[],level:3},{value:"ABI.json",id:"abijson",children:[],level:3},{value:"Run a local server",id:"run-a-local-server",children:[],level:3}],b={toc:m};function f(e){var n=e.components,c=(0,r.Z)(e,u);return(0,o.kt)("wrapper",(0,a.Z)({},b,c,{components:n,mdxType:"MDXLayout"}),(0,o.kt)(s.G,{type:s.e.Tutorial,mdxType:"DocTag"}),(0,o.kt)("p",null,"This chapter will setup a React app so that we can have a simple user interface for interacting with RenVM and the npm contract that we deployed in ",(0,o.kt)("a",{parentName:"p",href:"1-smart-contract"},"Part 1"),". We will assume some level of knowledge about React, so head over to ",(0,o.kt)("a",{parentName:"p",href:"https://reactjs.org/tutorial/tutorial.html"},"https://reactjs.org/tutorial/tutorial.html")," if you haven't used React before."),(0,o.kt)("h3",{id:"create-react-app"},"Create React App"),(0,o.kt)("p",null,"Set up a React app with ",(0,o.kt)("inlineCode",{parentName:"p"},"create-react-app"),". If you don't have ",(0,o.kt)("inlineCode",{parentName:"p"},"npx"),", install ",(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com/get-npm"},"node and npm"),"."),(0,o.kt)(l.Z,{defaultValue:"npm",values:[{label:"npm",value:"npm"},{label:"yarn",value:"yarn"}],mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"npx create-react-app basic-app\ncd basic-app\n"))),(0,o.kt)(i.Z,{value:"yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"yarn create react-app basic-app\ncd basic-app\n")))),(0,o.kt)("p",null,"Install Web3:"),(0,o.kt)(l.Z,{defaultValue:"npm",values:[{label:"npm",value:"npm"},{label:"yarn",value:"yarn"}],mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"npm install --save web3\n"))),(0,o.kt)(i.Z,{value:"yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"yarn add web3\n")))),(0,o.kt)("h3",{id:"appjs"},"App.js"),(0,o.kt)("p",null,"Replace ",(0,o.kt)("inlineCode",{parentName:"p"},"src/App.js")," with the code below. It sets up the following:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Connecting to Web3"),(0,o.kt)("li",{parentName:"ul"},"Showing the balance of the ",(0,o.kt)("inlineCode",{parentName:"li"},"Basic")," contract"),(0,o.kt)("li",{parentName:"ul"},"Showing two buttons, Deposit and Withdraw")),(0,o.kt)("p",null,"Replace the ",(0,o.kt)("inlineCode",{parentName:"p"},"contractAddress")," with the contract you deployed in Part 1. The lines indicated with ",(0,o.kt)("inlineCode",{parentName:"p"},"TODO")," will be filled out in Part 3."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/App.js"',title:'"src/App.js"'},'import React from "react";\nimport Web3 from "web3";\nimport "./App.css";\n\nimport ABI from "./ABI.json";\n\n// Replace with your contract\'s address.\nconst contractAddress = "0x3Aa969d343BD6AE66c4027Bb61A382DC96e88150";\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            balance: 0,\n            message: "",\n            error: "",\n        };\n    }\n\n    componentDidMount = async () => {\n        let web3Provider;\n\n        // Initialize web3 (https://medium.com/coinmonks/web3-js-ethereum-javascript-api-72f7b22e2f0a)\n        // Modern dApp browsers.\n        if (window.ethereum) {\n            web3Provider = window.ethereum;\n            try {\n                // Request account access.\n                await window.ethereum.enable();\n            } catch (error) {\n                // User denied account access.\n                this.logError("Please allow access to your Web3 wallet.");\n                return;\n            }\n        } else if (window.web3) {\n            // Legacy dApp browsers.\n            web3Provider = window.web3.currentProvider;\n        }\n        // If no injected web3 instance is detected, fall back to Ganache.\n        else {\n            this.logError("Please install MetaMask!");\n            return;\n        }\n\n        const web3 = new Web3(web3Provider);\n\n        const networkID = await web3.eth.net.getId();\n        if (networkID !== 42) {\n            this.logError("Please set your network to Kovan.");\n            return;\n        }\n\n        this.setState({ web3 }, () => {\n            // Update balances immediately and every 10 seconds.\n            this.updateBalance();\n            setInterval(() => {\n                this.updateBalance();\n            }, 10 * 1000);\n        });\n    };\n\n    render = () => {\n        const { balance, message, error } = this.state;\n        return (\n            <div className="App">\n                <p>Balance: {balance} BTC</p>\n                <p>\n                    <button onClick={() => this.deposit().catch(this.logError)}>\n                        Deposit 0.003 BTC\n                    </button>\n                </p>\n                <p>\n                    <button\n                        onClick={() => this.withdraw().catch(this.logError)}\n                    >\n                        Withdraw {balance} BTC\n                    </button>\n                </p>\n                {message.split("\\n").map((line) => (\n                    <p>{line}</p>\n                ))}\n                {error ? <p style={{ color: "red" }}>{error}</p> : null}\n            </div>\n        );\n    };\n\n    updateBalance = async () => {\n        const { web3 } = this.state;\n        const contract = new web3.eth.Contract(ABI, contractAddress);\n        const balance = await contract.methods.balance().call();\n        this.setState({ balance: parseInt(balance.toString()) / 10 ** 8 });\n    };\n\n    logError = (error) => {\n        console.error(error);\n        this.setState({ error: String((error || {}).message || error) });\n    };\n\n    log = (message) => {\n        this.setState({ message });\n    };\n\n    deposit = async () => {\n        this.logError(""); // Reset error.\n        // TODO\n    };\n\n    withdraw = async () => {\n        this.logError(""); // Reset error.\n        // TODO\n    };\n}\n\nexport default App;\n')),(0,o.kt)("h3",{id:"abijson"},"ABI.json"),(0,o.kt)("p",null,'In order to talk to our Ethereum contract, we need to have its ABI. You can find this in Remix by going to the "Solidity Compiler" tab, clicking "Compilation Details" and copying the "ABI" section. Paste this into ',(0,o.kt)("inlineCode",{parentName:"p"},"src/ABI.json"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="src/ABI.json"',title:'"src/ABI.json"'},'[\n    {\n        "constant": false,\n        "inputs": [\n            {\n                "name": "_msg",\n                "type": "bytes"\n            },\n            {\n                "name": "_amount",\n                "type": "uint256"\n            },\n            {\n                "name": "_nHash",\n                "type": "bytes32"\n            },\n            {\n                "name": "_sig",\n                "type": "bytes"\n            }\n        ],\n        "name": "deposit",\n        "outputs": [],\n        "payable": false,\n        "stateMutability": "nonpayable",\n        "type": "function"\n    },\n    {\n        "constant": false,\n        "inputs": [\n            {\n                "name": "_msg",\n                "type": "bytes"\n            },\n            {\n                "name": "_to",\n                "type": "bytes"\n            },\n            {\n                "name": "_amount",\n                "type": "uint256"\n            }\n        ],\n        "name": "withdraw",\n        "outputs": [],\n        "payable": false,\n        "stateMutability": "nonpayable",\n        "type": "function"\n    },\n    {\n        "constant": true,\n        "inputs": [],\n        "name": "registry",\n        "outputs": [\n            {\n                "name": "",\n                "type": "address"\n            }\n        ],\n        "payable": false,\n        "stateMutability": "view",\n        "type": "function"\n    },\n    {\n        "constant": true,\n        "inputs": [],\n        "name": "balance",\n        "outputs": [\n            {\n                "name": "",\n                "type": "uint256"\n            }\n        ],\n        "payable": false,\n        "stateMutability": "view",\n        "type": "function"\n    },\n    {\n        "inputs": [\n            {\n                "name": "_registry",\n                "type": "address"\n            }\n        ],\n        "payable": false,\n        "stateMutability": "nonpayable",\n        "type": "constructor"\n    },\n    {\n        "anonymous": false,\n        "inputs": [\n            {\n                "indexed": false,\n                "name": "_amount",\n                "type": "uint256"\n            },\n            {\n                "indexed": false,\n                "name": "_msg",\n                "type": "bytes"\n            }\n        ],\n        "name": "Deposit",\n        "type": "event"\n    },\n    {\n        "anonymous": false,\n        "inputs": [\n            {\n                "indexed": false,\n                "name": "_to",\n                "type": "bytes"\n            },\n            {\n                "indexed": false,\n                "name": "_amount",\n                "type": "uint256"\n            },\n            {\n                "indexed": false,\n                "name": "_msg",\n                "type": "bytes"\n            }\n        ],\n        "name": "Withdrawal",\n        "type": "event"\n    }\n]\n')),(0,o.kt)("h3",{id:"run-a-local-server"},"Run a local server"),(0,o.kt)("p",null,"Start a local development server by running:"),(0,o.kt)(l.Z,{defaultValue:"npm",values:[{label:"npm",value:"npm"},{label:"yarn",value:"yarn"}],mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"npm run start\n"))),(0,o.kt)(i.Z,{value:"yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"yarn start\n")))),(0,o.kt)("p",null,"You can now access the React app at ",(0,o.kt)("inlineCode",{parentName:"p"},"http://localhost:3000"),". The buttons shouldn't do anything yet, but we'll be fixing that in the next part of the tutorial."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Your brand new React app!",src:t(64849).Z})),(0,o.kt)("p",null,"Continue to the next section to start interacting with RenVM using RenJS."))}f.isMDXComponent=!0},93454:function(e,n,t){t.d(n,{G:function(){return i},e:function(){return r}});var a,r,o=t(67294);!function(e){e.Tutorial="Tutorial",e.HowTo="How To",e.Reference="Reference",e.Explanation="Explanation"}(r||(r={}));var l=((a={})[r.Tutorial]="#b48ead",a[r.HowTo]="#69a8b9",a[r.Reference]="#bf616a",a[r.Explanation]="#d2b06c",a),i=function(e){var n=e.type,t=e.marginBottom;return o.createElement(o.Fragment,null,o.createElement("span",{style:{border:"2px solid "+l[n]||0,borderRadius:"5px",color:l[n]||"orange",padding:"0.1rem 0.4rem",marginBottom:void 0!==t?t:30,display:"inline-block"}},String(n)))}},58215:function(e,n,t){var a=t(67294);n.Z=function(e){var n=e.children,t=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:t,className:r},n)}},26396:function(e,n,t){t.d(n,{Z:function(){return d}});var a=t(87462),r=t(67294),o=t(72389),l=t(79443);var i=function(){var e=(0,r.useContext)(l.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},s=t(53810),u=t(86010),c="tabItem_vU9c";function p(e){var n,t,o,l=e.lazy,p=e.block,d=e.defaultValue,m=e.values,b=e.groupId,f=e.className,h=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),y=null!=m?m:h.map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes}})),v=(0,s.lx)(y,(function(e,n){return e.value===n.value}));if(v.length>0)throw new Error('Docusaurus error: Duplicate values "'+v.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var w=null===d?d:null!=(n=null!=d?d:null==(t=h.find((function(e){return e.props.default})))?void 0:t.props.value)?n:null==(o=h[0])?void 0:o.props.value;if(null!==w&&!y.some((function(e){return e.value===w})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+w+'" but none of its children has the corresponding value. Available values are: '+y.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var g=i(),k=g.tabGroupChoices,T=g.setTabGroupChoices,x=(0,r.useState)(w),j=x[0],N=x[1],E=[],I=(0,s.o5)().blockElementScrollPositionUntilNextRender;if(null!=b){var R=k[b];null!=R&&R!==j&&y.some((function(e){return e.value===R}))&&N(R)}var C=function(e){var n=e.currentTarget,t=E.indexOf(n),a=y[t].value;a!==j&&(I(n),N(a),null!=b&&T(b,a))},O=function(e){var n,t=null;switch(e.key){case"ArrowRight":var a=E.indexOf(e.currentTarget)+1;t=E[a]||E[0];break;case"ArrowLeft":var r=E.indexOf(e.currentTarget)-1;t=E[r]||E[E.length-1]}null==(n=t)||n.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,u.Z)("tabs",{"tabs--block":p},f)},y.map((function(e){var n=e.value,t=e.label,o=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:j===n?0:-1,"aria-selected":j===n,key:n,ref:function(e){return E.push(e)},onKeyDown:O,onFocus:C,onClick:C},o,{className:(0,u.Z)("tabs__item",c,null==o?void 0:o.className,{"tabs__item--active":j===n})}),null!=t?t:n)}))),l?(0,r.cloneElement)(h.filter((function(e){return e.props.value===j}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},h.map((function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==j})}))))}function d(e){var n=(0,o.Z)();return r.createElement(p,(0,a.Z)({key:String(n)},e))}},64849:function(e,n,t){n.Z=t.p+"assets/images/tutorial-react-3456999d60c7318431a325d94ce4020c.png"}}]);