<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/ren-client-docs/blog/rss.xml" title="Ren Client Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ren-client-docs/blog/atom.xml" title="Ren Client Docs Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Ren Client Docs" href="/ren-client-docs/opensearch.xml"><title data-react-helmet="true">Build your first Dapp with RenJS | Ren Client Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://renproject.github.io/ren-client-docs/ren-client-docs/blog/build-a-dapp-with-renjs"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Build your first Dapp with RenJS | Ren Client Docs"><meta data-react-helmet="true" name="description" content="Building a simple marketplace on Ethereum"><meta data-react-helmet="true" property="og:description" content="Building a simple marketplace on Ethereum"><meta data-react-helmet="true" property="og:image" content="https://avatars.githubusercontent.com/u/11544711?s=60&amp;v=4"><meta data-react-helmet="true" name="twitter:image" content="https://avatars.githubusercontent.com/u/11544711?s=60&amp;v=4"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-09-08T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/terrafirmatrekker"><meta data-react-helmet="true" property="article:tag" content="RenVM,RenJS,dapp,tutorial"><link data-react-helmet="true" rel="icon" href="/ren-client-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://renproject.github.io/ren-client-docs/ren-client-docs/blog/build-a-dapp-with-renjs"><link data-react-helmet="true" rel="alternate" href="https://renproject.github.io/ren-client-docs/ren-client-docs/blog/build-a-dapp-with-renjs" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://renproject.github.io/ren-client-docs/ren-client-docs/blog/build-a-dapp-with-renjs" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://KG38F1M5FV-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/ren-client-docs/assets/css/styles.1cfb6b6d.css">
<link rel="preload" href="/ren-client-docs/assets/js/runtime~main.7076c633.js" as="script">
<link rel="preload" href="/ren-client-docs/assets/js/main.26a0c57c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ren-client-docs/"><div class="navbar__logo"><img src="/ren-client-docs/img/logo.svg" alt="Ren logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/ren-client-docs/img/logo.svg" alt="Ren logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Ren Client Docs</b></a><a class="navbar__item navbar__link" href="/ren-client-docs/general/">General</a><a class="navbar__item navbar__link" href="/ren-client-docs/ren-js/">RenJS</a><a class="navbar__item navbar__link" href="/ren-client-docs/contracts/">Contracts</a><a class="navbar__item navbar__link" href="/ren-client-docs/stats/">Stats APIs</a><a class="navbar__item navbar__link" href="/ren-client-docs/api/">JSON-RPC</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/renproject/ren-js" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>RenJS GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_9G5K margin-bottom--md">Recent posts</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a aria-current="page" class="sidebarItemLink_zyXk sidebarItemLinkActive_wcJs" href="/ren-client-docs/blog/build-a-dapp-with-renjs">Build your first Dapp with RenJS</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">Build your first Dapp with RenJS</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2021-09-08T00:00:00.000Z" itemprop="datePublished">September 8, 2021</time> · <!-- -->22 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_8c0z"><div class="avatar margin-bottom--sm"><a href="https://github.com/terrafirmatrekker" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_9q7L" src="https://avatars.githubusercontent.com/u/11544711?s=60&amp;v=4" alt="Tejas"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/terrafirmatrekker" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Tejas</span></a></div><small class="avatar__subtitle" itemprop="description">Developer Relations at Ren</small></div></div></div></div></header><meta itemprop="image" content="https://avatars.githubusercontent.com/u/11544711?s=60&amp;v=4"><div class="markdown" itemprop="articleBody"><p>Our dapp will be powered by a smart contract that will track the ownership of products and instantly transfer ownership after a product is purchased by another user. One feature that will be unique is that users will be able to bridge Bitcoin in so our users can participate in the Ethereum ecosystem, this will be achieved by utilizing RenJS in our dapp.</p><p>RenJS is the SDK for integrating with RenVM. For more lower-level details on the inner workings of the RenVM network, check out the<a href="https://github.com/renproject/ren/wiki/Introduction" target="_blank" rel="noopener noreferrer"> specification</a> on GitHub.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="why-are-we-building-it"><strong>Why are we building it?</strong><a class="hash-link" href="#why-are-we-building-it" title="Direct link to heading">​</a></h4><p>Our approach to this tutorial is to introduce to you a simple way to familiarize yourself with some of the building blocks of dapps. It will highlight the use of smart contracts and get your feet wet building on Ethereum. Sure there are many crypto e-commerce dapps and more will pop up, but this tutorial aims to give you the basics to build on. You could use some of the concepts from the tutorial to build a number of useful dapps, or even use the experience using RenJS to apply to other<a href="https://medium.com/renproject/12-app-ideas-using-renvm-eb08fb095499" target="_blank" rel="noopener noreferrer"> DeFi projects</a>, the possibilities are truly limitless. If you feel comfortable with the basics and feel like jumping into RenJS, head over to our<a href="https://renproject.github.io/ren-client-docs/ren-js" target="_blank" rel="noopener noreferrer"> Documentation</a> and feel free to reach out on Telegram with any questions.</p><hr><h3 class="anchor anchorWithStickyNavbar_y2LR" id="part-1-getting-started"><strong>Part 1: Getting Started</strong><a class="hash-link" href="#part-1-getting-started" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="configuring-your-developer-environment"><strong>Configuring your Developer Environment</strong><a class="hash-link" href="#configuring-your-developer-environment" title="Direct link to heading">​</a></h4><p>This tutorial assumes that you already have Node installed in order to use NPM. If you need to install Node you can visit the <a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">Node.js website</a> to download it. Let’s begin the tutorial by getting the rest of our project’s dependencies installed. First, we are going to install and set up Ganache.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ganache"><strong>Ganache</strong><a class="hash-link" href="#ganache" title="Direct link to heading">​</a></h4><p>Ganache will enable us to use a personal blockchain to develop, deploy, and test the dapp locally before we deploy it to Kovan testnet. You can find the latest release for your OS<a href="https://www.trufflesuite.com/ganache" target="_blank" rel="noopener noreferrer"> here</a>. Once you’ve downloaded the package, extract the installer and go through the setup.</p><p>After you’ve installed and opened Ganache you should see two buttons: Quickstart and New Workspace. Click New Workspace and you should see a screen with 10 accounts with 100 ether as the balances.</p><p>Congratulations you now have a local blockchain up and running! By utilizing Ganache we save time avoiding blockchain development or account creation for testing. Ganache mimics the behavior of the public blockchain locally and is just one of many tools you may find useful in your Web3 developer journey.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="installing-truffle-suite"><strong>Installing Truffle Suite</strong><a class="hash-link" href="#installing-truffle-suite" title="Direct link to heading">​</a></h4><p>Let’s install the Truffle suite next. With Truffle you will be able to do a variety of things but most importantly it can handle your smart contract management that will compile to opcode/bytecode on the Ethereum Virtual Machine (EVM). It can also automate testing, handle network management; basically a ton of stuff. I won’t get too much into Truffle but if you feel comfortable with some of the concepts in dapp development I recommend<a href="https://www.trufflesuite.com/boxes" target="_blank" rel="noopener noreferrer"> Truffle Boxes</a> which are useful boilerplates to get you up and running quickly.</p><p>To install Truffle open your terminal and follow the instructions<a href="https://www.trufflesuite.com/docs/truffle/getting-started/installation" target="_blank" rel="noopener noreferrer"> here</a>. Alternatively, if you feel like diving into the project without installing Truffle globally or you just want to toy around with the code, you can clone the repo (link) and run npm since Truffle and all the other dependencies are included. So to install Truffe head over to the terminal and type</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="background-color:#2e3440;color:#d7dde8"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#d7dde8"><span class="token function" style="color:#bf616a">npm</span><span class="token plain"> </span><span class="token function" style="color:#bf616a">install</span><span class="token plain"> truffle -g</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="setting-up-metamask"><strong>Setting up Metamask</strong><a class="hash-link" href="#setting-up-metamask" title="Direct link to heading">​</a></h4><p>If you don’t already have Metamask installed, now is the time to do so. Metamask enables you to utilize your browser to send and receive Ethereum and ERC20s. Available as a browser extension and as a mobile app, MetaMask equips you with a key vault, secure login, token wallet, and token exchange — everything you need to manage your digital assets. For the purpose of the tutorial, we will use the Metamask extension for Google Chrome.</p><p>To install Metamask check out their<a href="https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn?hl=en" target="_blank" rel="noopener noreferrer"> extension</a> and follow their instructions to get it set up. Make sure that you see the extension activated as denoted by the fox icon along your browser’s address bar.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="cloning-the-project-repo"><strong>Cloning the project repo</strong><a class="hash-link" href="#cloning-the-project-repo" title="Direct link to heading">​</a></h4><p>Instead of going through the rigamarole of getting your project’s directory set up, I created a clonable repo based off the Create ETH app that has all the Ren dependencies you might need to get things moving quickly, just head over to this repo (link) and clone it by typing:</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="background-color:#2e3440;color:#d7dde8"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#d7dde8"><span class="token function" style="color:#bf616a">git</span><span class="token plain"> clone https://github.com/terrafirmatrekker/Nakamoto-Store-Demo</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now cd into the directory that you cloned and you should be ready to go! Looking at our project directory you should see a simple truffle project configuration to help you build many dapps including some of the best packages from Ren, even though we only actually need two. I definitely recommend checking out all of the<a href="https://github.com/renproject/ren-js" target="_blank" rel="noopener noreferrer"> integration options we have</a>. With this basic project setup, you can create and test smart contracts, develop modern frontend applications. You can check out the dependencies in the package.json file if you’d like. To install the dependencies head over to the terminal with the project directory selected and type:</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="background-color:#2e3440;color:#d7dde8"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#d7dde8"><span class="token function" style="color:#bf616a">npm</span><span class="token plain"> </span><span class="token function" style="color:#bf616a">install</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In the project directory you will notice a truffle-config file. This file is used to connect to our dapp’s blockchain network. In the file you will see configurations to connect to the Ganache blockchain (127.0.0.1:7545). We will get into the rest of the files in the directory as they pertain to the project. The other important items to consider in the directory is the components folder which is based on a starter template for our React frontend and simple tests written in Mocha and with the Chai assertion library, which I used to test our smart contracts, but you can use as a reference. We will go over the rest in the remainder of this tutorial.</p><hr><h3 class="anchor anchorWithStickyNavbar_y2LR" id="-part-2-smart-contracts"><strong> Part 2: Smart Contracts</strong><a class="hash-link" href="#-part-2-smart-contracts" title="Direct link to heading">​</a></h3><p>A “smart contract” is simply a program that runs on the Ethereum blockchain. It’s a collection of code (its functions) and data (its state) that resides at a specific address on the Ethereum blockchain.</p><p>You can think of smart contracts as a type of Ethereum account which means they have a balance and can process transactions over the network. What is truly unique about smart contracts is the fact that they are not controlled by an individual, once they are deployed to the network they run as they are programmed, immutable by nature.</p><p>Some would equate smart contracts to a “backend,” or a microservice or APIs (smart contracts are public on Ethereum and can be interacted with), but it’s far bigger than that. Not to drone on about smart contracts, but really at the end of the day these little files with op/bytecode are the meat and potatoes of Web3, they enable dapps to do a tremendous amount of things in the background. I don’t like to make predictions but as I see it many, if not most sectors in the future, will be impacted by smart contracts. From finance to gaming, exchanges, and media dapps — they all utilize smart contracts in many different ways.</p><p>Ethereum has developer-friendly languages for writing smart contracts such as Solidity and Vyper. However, for the Ethereum Virtual Machine (EVM) to run your contract it needs to be in bytecode. We will do this through compilation via the<a href="https://remix.ethereum.org/" target="_blank" rel="noopener noreferrer"> Remix IDE</a>, which is an open-source web and desktop application that affords devs a fast development cycle with a rich set of plugins and intuitive GUIs. Remix will be used for your entire journey of smart contract development and can serve as a veritable playground for learning Ethereum. Our smart contracts will be written in Solidity for this tutorial. If you already feel comfortable with Solidity and are curious about how to integrate with Ren and Ren JS check out this<a href="https://github.com/renproject/ren-solidity-template" target="_blank" rel="noopener noreferrer"> repo</a> for a template.</p><p>There is one gotcha for most use cases, smart contracts cannot retrieve information from the “real-world” because of their inability to send HTTP requests. This was a product of design since reliance on external sources could jeopardize security and the goal of decentralization. Dapps use<a href="https://ethereum.org/en/developers/docs/oracles/" target="_blank" rel="noopener noreferrer"> oracles</a> for such information but there are workarounds.</p><p>It is a good idea to use audited and pre-built smart contracts which are used throughout the ecosystem. A great resource is<a href="https://github.com/OpenZeppelin/openzeppelin-contracts" target="_blank" rel="noopener noreferrer"> OpenZeppelin</a> who regularly undergoes audits and contributes to the composable nature of smart contracts.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="our-contract"><strong>Our Contract</strong><a class="hash-link" href="#our-contract" title="Direct link to heading">​</a></h4><p>Our contract will do some simple things, but when you take a step back and realize that the data from our contract interactions are immutable, that is where you will see the awesome power of smart contracts. It is amazing how quickly cryptocurrency and blockchains have evolved, in fact, the first transaction with Bitcoin was only 10 years ago when programmer Laszlo Hanyecz bought two Papa John’s pizzas for[ ₿<a href="https://en.wikipedia.org/wiki/Bitcoin#:~:text=In%202010%2C%20the%20first%20known,John%27s%20pizzas%20for%20%E2%82%BF10%2C000" target="_blank" rel="noopener noreferrer">10,000</a>]. Now you can do a tremendous amount of things with smart contracts such as speculate on derivatives, lend and borrow cryptocurrencies, swap and stake tokens, buy art, or even insurance.</p><p>The thing that excites me about RenVM is its ability to empower smart contracts in a totally different way. A world with fully autonomous smart contracts working with chain-to-chain interactions is something that will change how the world works. Imagine, programmable bots trained by algorithms just moving and trading assets, decentralized, and free of humans. Simply reacting to events in the real world and following their instructions. Pretty incredible stuff and things that I expect is in the very near future.</p><p>Instead of going through the entire contract, I am going to explain some of the key bits that are necessary to understand the dapps functionality. To get started open the file named Marketplace.sol in the IDE of your choice.</p><p>First, you will see the version of Solidity declared:</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="background-color:#2e3440;color:#d7dde8"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#d7dde8"><span class="token plain">pragma solidity ^0.5.0;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Below it we will declare our smart contract Marketplace which creates a state variable that will be stored on the blockchain. All of our smart contract code will be written inside the curly braces as you can see. You will also see a variable called name which we use for testing and we declare it public so we can read its value outside of the contract.</p><p>Below you can see a struct to allow us to list products:</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="background-color:#2e3440;color:#d7dde8"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#d7dde8"><span class="token plain">struct Product {</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    uint256 id;</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    string name;</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    uint256 price;</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    address payable owner;</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    bool purchased;</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We can treat a struct like a value type such that it can be used within arrays and mappings. You can see the struct members, which consist of variable names along with their types. Solidity enables you to create your own data structures, with any attributes. That’s exactly what is done by creating a Product struct. It stores all the attributes of a product that we’ll need, like id, name, price, owner, and a boolean to determine if it is purchased. Now let’s jump back up a few lines you may have noticed these two lines which I didn’t explain:</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="background-color:#2e3440;color:#d7dde8"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#d7dde8"><span class="token plain">uint256 public productCount = 0;</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">mapping(uint256 =&gt; Product) public products;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The first line is to keep track of how many products exist in the smart contract. We initialize it with 0 to begin. The second line is used to store the products on the blockchain. We use mapping to achieve this. According to the Solidity docs, “mappings can be seen as hash tables which are virtually initialized such that every possible key exists and is mapped to a value whose byte-representation are all zeros.”</p><p>Let’s go below the Product struct we created and you should see two event definitions that correspond to the functions below it. The first event relates to when a product is created, and the second pertains to when a product is purchased. These work almost exactly the same</p><p>Looking at the function related to the events you can see <strong>createProduct</strong>. Let’s break this function down a bit. This function will accept a name, price (in Wei), and check for conditions that the name is and price is greater than 0. Below that you see a line called <strong>productCount++</strong>; This is used to create a new Product id by utilizing the increment operator (++). Then we create a new product and add it to the mapping. <strong>msg.sender</strong> is the address of the user creating the product. Last you see, <strong>emit ProductCreated</strong> which is what emits the event to notify that a product was created. Events are inheritable members of contracts. When you call them, they cause the arguments to be stored in the transaction’s log — a special data structure in the blockchain. These logs are associated with the address of the contract, are incorporated into the blockchain, and stay there as long as a block is accessible.</p><p>Now let’s break down the second function corresponding to the event <strong>ProductPurchased</strong>. First we get the product from the mapping we created and store the current owner to a variable. We have a few requirements below demarcated by <strong>require</strong>. The requirements are a valid id, sufficient Ether for the transaction, the buyer is not the seller, and the product is still unpurchased. Next after the requirements are met we allow for the transaction to occur. We transfer ownership of the product to the buyer, mark the product as bought, and send the Ether to the seller. Finally, the event is emitted to show that a product has been purchased.</p><p>Wow, we covered a ton of information in a short span of time! So by now you should have the tools to mimic a public blockchain through Ganache, the Truffle suite to automate testing with the test files and do a variety of things. We have also reviewed quite a bit on smart contracts, I encourage you to read the<a href="https://docs.soliditylang.org/en/v0.8.6/" target="_blank" rel="noopener noreferrer"> Solidity documentation</a> to further develop your understanding. You may also consider<a href="https://docs.soliditylang.org/en/v0.8.1/solidity-by-example.html#" target="_blank" rel="noopener noreferrer"> their examples</a> to develop some of your own basic dapps. There are also many open-source resources to get you started. If you have a desire to dig deeper on some of the concepts, a few things that helped me understand concepts better:</p><ul><li><a href="https://andersbrownworth.com/blockchain/" target="_blank" rel="noopener noreferrer">Visualizing the blockchain</a>: a professor has some examples of keys, blockchains and various other demos</li><li><a href="https://ocw.mit.edu/courses/sloan-school-of-management/15-s12-blockchain-and-money-fall-2018/index.htm" target="_blank" rel="noopener noreferrer">MIT Mooc Blockchain and Money</a>: In particular Sessions 2–4 (relevant to Week 3 of Notion), &amp; 6 ( a great course in its entirety)</li><li><a href="https://eth.build/" target="_blank" rel="noopener noreferrer">ETH Builder</a>: I think the dev behind this illustrates the<a href="https://www.youtube.com/watch?v=zcX7OJ-L8XQ" target="_blank" rel="noopener noreferrer"> Blockchain</a> and<a href="https://www.youtube.com/watch?v=-6aYBdnJ-nM" target="_blank" rel="noopener noreferrer"> Smart Contracts</a> pretty well. In fact besides his connection to Ethereum, I think a visualization of RenVM via the same open-source toolset would be great as well!</li><li><a href="https://blog.openzeppelin.com/the-hitchhikers-guide-to-smart-contracts-in-ethereum-848f08001f05/%29,%20%5BA%20Gentle%20Intro%20to%20Ethereum%20Programming%5D%28https://blog.openzeppelin.com/designing-the-architecture-for-your-ethereum-application-9cec086f8317/" target="_blank" rel="noopener noreferrer">Hitchhiker’s Guide to Smart Contracts</a></li><li><a href="https://medium.com/blockchain-at-berkeley/introduction-to-blockchain-through-cryptoeconomics-part-1-bitcoin-369f245067f9" target="_blank" rel="noopener noreferrer">Introduction to Blockchain through Cryptoeconomics</a></li></ul><p>In Part 2 and 3 I will outline some of the components of our dapp like the Store’s frontend, a frontpage, a “bridge” where we will interact with RenVM to allow customers to convert BTC to renBTC to use in the shop, and more on other ways you can use RenVM.</p><hr><h3 class="anchor anchorWithStickyNavbar_y2LR" id="part-2-interacting-with-renvm"><strong>Part 2: Interacting with RenVM</strong><a class="hash-link" href="#part-2-interacting-with-renvm" title="Direct link to heading">​</a></h3><p>Now that we have our store smart contract created and tests in place to assure it is functioning as we planned we can move to one final task with Solidity before deploying our contract to Kovan, which is the use of an “adapter contract” to bring renBTC to our dapp so customers can purchase products with BTC.</p><p>The BasicAdapter contract is not part of the core RenVM protocol contracts and is only used by the front-end RenJS library. It’s a contract that submits mint signatures to a MintGateway and then forwards the minted ren-asset to the specified recipient. You can find<a href="https://github.com/renproject/gateway-sol" target="_blank" rel="noopener noreferrer"> examples</a> and<a href="https://github.com/renproject/ren-solidity-template" target="_blank" rel="noopener noreferrer"> templates</a> in Ren’s repos.</p><p>Looking at our smart contract some things to note would be the use of interfaces. Interfaces are the same as abstract contracts created by using an interface keyword, also known as a pure abstract contract. Interfaces do not have any definition or any state variables, constructors, or any function with implementation, they only contain function declarations i.e. functions in interfaces do not have any statements. The idea is to use inheritance to create a compliant implementation — a contract with the exact same functions implemented. Anyone can implement these functions in the contract.</p><p>In our contract you should notice the use of the IGateway interface with two function declarations mint and burn:</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="background-color:#2e3440;color:#d7dde8"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#d7dde8"><span class="token plain">interface IGateway {</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    function mint(bytes32 _pHash, uint256 _amount, bytes32 _nHash, bytes calldata _sig) external returns (uint256);</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    function burn(bytes calldata _to, uint256 _amount) external returns (uint256);</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For our dapp we will only implement mint since our users will send BTC and mint renBTC which is an ERC20 token that can be used in our store. You can see the implementation in the mint function:</p><div class="codeBlockContainer_J+bg language-sol theme-code-block"><div class="codeBlockContent_csEI sol"><pre tabindex="0" class="prism-code language-sol codeBlock_rtdJ thin-scrollbar" style="background-color:#2e3440;color:#d7dde8"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#d7dde8"><span class="token plain">function mint(</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    // Payload</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    string calldata _symbol,</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    address _recipient,</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    // Required</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    uint256 _amount,</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    bytes32 _nHash,</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    bytes calldata _sig</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">) external {</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    bytes32 payloadHash = keccak256(abi.encode(_symbol, _recipient));</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    uint256 amount = registry.getGatewayBySymbol(_symbol).mint(</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    payloadHash,</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    _amount,</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    _nHash,</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    _sig</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">);</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    registry.getTokenBySymbol(“BTC”).transfer(msg.sender, amount);</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can interact with this contract that is already deployed on Kovan<a href="https://kovan.etherscan.io/address/0x7e5c5fc517ad27070faf8b2ac05d06bf0250332d" target="_blank" rel="noopener noreferrer"> here</a>. To deploy your own version of the contract following the instructions at the bottom of our<a href="https://renproject.github.io/ren-client-docs/ren-js/tutorial/smart-contract/" target="_blank" rel="noopener noreferrer"> tutorial</a> labeled: <em>Deploying to Kovan. </em></p><p><strong>Remember to deploy to GatewayRegistry’s address, 0x557e211EC5fc9a6737d2C6b7a1aDe3e0C11A8D5D</strong></p><p>At this point we can move to the frontend integration of RenJS. For the purposes of the tutorial, we are going to cover the integration but the store itself is fully functional and can be used to sell and buy products on the blockchain with ethers.</p><hr><h3 class="anchor anchorWithStickyNavbar_y2LR" id="part-3-integrating-with-renjs"><strong>Part 3: Integrating with RenJS</strong><a class="hash-link" href="#part-3-integrating-with-renjs" title="Direct link to heading">​</a></h3><p>As I mentioned in Part 2, the store as is totally functional if you are using ethers as a method of payment. But let’s make it possible for users to convert BTC to renBTC a 1:1 ERC-20 token representation of Bitcoin (BTC) on Ethereum.</p><p>We have already laid the foundation for adapting our smart contract to use RenJS the official SDK for interacting with RenVM. As I intimated before our users will only require a mint transaction, technically speaking a lock-and-mint transaction.</p><p>Lock-and-mint transactions are so named because the first step requires the user to send assets to RenVM, thereby “locking” into its custody. Unless there is consensus in RenVM that the assets can be released, they will remain locked. After witnessing the locking of assets, RenVM returns a “minting signature” to the user. This authorizes the user to mint a tokenized representation of the asset on the host chain. This representation is pegged one-to-one with the locked asset; it is always redeemable in any quantity at any time. You can learn more about cross-chain transactions<a href="https://github.com/renproject/ren/wiki#cross-chain-transactions" target="_blank" rel="noopener noreferrer"> here</a>.</p><p>In fact, you would not need the adapter contract if your dapp was merely minting and burning assets. In our Developer Docs we have a<a href="https://renproject.github.io/ren-client-docs/ren-js/quick-start" target="_blank" rel="noopener noreferrer"> quick start section</a> that illustrates how easy it is to mint and burn assets if you are a developer familiar with Web3. Check out the code below to mint a tokenized Bitcoin.</p><p>Back to those following along less familiar with Web3, navigate to the component sub-folder in your project directory. As this project is a react app we have several different components, feel free to explore the components to understand how we use<a href="https://web3js.readthedocs.io/en/v1.5.2/" target="_blank" rel="noopener noreferrer"> Web3.js</a> to wire the frontend to communicate with smart contracts. The component that highlights the integration of RenJS is named Bridge.js. Open up this component in your IDE and follow along as I explain what is happening. You can also check out our<a href="https://renproject.github.io/ren-client-docs/ren-js/tutorial/ren-js" target="_blank" rel="noopener noreferrer"> RenJS tutorial</a> whose code I adapted for the purposes of the demo.</p><p>RenJS allows developers to interact with RenVM’s growing network of bridged chains and assets. It’s the official JavaScript SDK for interacting with RenVM and for bridging assets.</p><p>First you will need to install 2 packages:</p><ul><li>@renproject/ren implements the core logic for interacting with RenVM</li><li>@renproject/chains provides support for various assets and chains. These can also be imported separately as I have done- e.g. using @renproject/chains-ethereum for Ethereum</li></ul><p>I have imported these packages at the top of my component file. Next, I initialize RenJS, I initialize it with the parameter “testnet” on line 19 to connect to RenVM’s testnet.</p><div class="codeBlockContainer_J+bg language-ts theme-code-block"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#2e3440;color:#d7dde8"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#d7dde8"><span class="token plain">renJS</span><span class="token operator" style="color:#bf616a">:</span><span class="token plain"> </span><span class="token keyword" style="color:#ebcb8b">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:#bf616a">RenJS</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token plain">“testnet”</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token punctuation" style="color:#88c0d0">,</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>As I intimated before there are two steps involves in creating new renBTC tokens on Ethereum — 1) locking BTC and 2) minting renBTC. The method on RenJS to initiate this process is called a lockAndMint. You can read more about this interface in our<a href="https://renproject.github.io/ren-js-docs/index.html" target="_blank" rel="noopener noreferrer"> TypeDocs</a>. Here&#x27;s what it looks like to set-up a lockAndMint to a user&#x27;s address on Ethereum:</p><p>Though for our dapp we want to send BTC to a smart contract, not just a user’s address. To do this, we specify the details needed to call the smart contract. You can see a const variable on line 20 with the address of the smart contract we created.</p><p>Each LockAndMint object has a unique <em>gateway address</em>, generated from the details we provided to it. We want to show the gateway address to the user and then wait for them to send BTC to this address. We do this on line 145 by adding:</p><div class="codeBlockContainer_J+bg language-ts theme-code-block"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#2e3440;color:#d7dde8"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#d7dde8"><span class="token function" style="color:#bf616a">alert</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token template-string template-punctuation string" style="color:#88c0d0">`</span><span class="token template-string string" style="color:#88c0d0">Deposit </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">${</span><span class="token template-string interpolation">amount</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">}</span><span class="token template-string string" style="color:#88c0d0"> BTC to </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">${</span><span class="token template-string interpolation">mint</span><span class="token template-string interpolation punctuation" style="color:#88c0d0">.</span><span class="token template-string interpolation property-access">gatewayAddress</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">}</span><span class="token template-string template-punctuation string" style="color:#88c0d0">`</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token punctuation" style="color:#88c0d0">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>To handle deposits received at the gateway address, the mint object emits &quot;deposit&quot; events that can be listened to using mint.on(&quot;deposit&quot;, ...). After detecting a deposit, there are three steps for completing the asset bridging:</p><ol><li>waiting for the deposit to be confirmed,</li><li>submitting the deposit to RenVM and wait for a signature, and</li><li>submitting to the mint-chain — in the dapp this is Ethereum.</li></ol><p>We perform these steps inside the &quot;deposit&quot; event callback on lines 147–164</p><p>We then alert the user of the BTC deposited:</p><div class="codeBlockContainer_J+bg language-ts theme-code-block"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#2e3440;color:#d7dde8"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#d7dde8"><span class="token function" style="color:#bf616a">alert</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token template-string template-punctuation string" style="color:#88c0d0">`</span><span class="token template-string string" style="color:#88c0d0">Deposited </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">${</span><span class="token template-string interpolation">amount</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">}</span><span class="token template-string string" style="color:#88c0d0"> BTC.</span><span class="token template-string template-punctuation string" style="color:#88c0d0">`</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token punctuation" style="color:#88c0d0">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>To check on the status of the deposit we can usedeposit.status which returns the current progress of the deposit, and will be &quot;detected&quot;, &quot;confirmed&quot;, &quot;signed&quot;, &quot;submitted&quot; or &quot;reverted&quot;. (<em>See<a href="https://renproject.github.io/ren-js-docs/enums/depositstatus.html" target="_blank" rel="noopener noreferrer"> DepositStatus docs</a></em>)</p><p>In addition to receiving .on(&quot;deposit&quot;, ...) events, you can also manually provide the details of a deposit using mint.processDeposit. The parameter should match the type of deposit.depositDetails of a deposit object returned from.on(&quot;deposit&quot;, ...).</p><p>Now let’s say the user wanted to get their BTC back by burning their renBTC. This functionality though not utilized in the dapp is added on just to show how users can get their BTC back.</p><p>In order to return the BTC back from Ethereum, the renBTC must be burned, and a recipient BTC address must be chosen. RenVM will automatically see and process the burn, releasing the BTC to the recipient. RenJS can be used to:</p><ol><li>initiate a burn by providing it the details to burn the renBTC, or</li><li>monitor an existing burn by providing it with the transaction hash or identifier of the burn.</li></ol><p>For the sake of education here is how initiating a burn looks like: (lines 169–208 in Bridge.js file):</p><div class="codeBlockContainer_J+bg language-ts theme-code-block"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#2e3440;color:#d7dde8"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#d7dde8"><span class="token keyword" style="color:#ebcb8b">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#88c0d0">{</span><span class="token plain"> web3</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"> renJS</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"> balance </span><span class="token punctuation" style="color:#88c0d0">}</span><span class="token plain"> </span><span class="token operator" style="color:#bf616a">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ebcb8b">this</span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token property-access">state</span><span class="token punctuation" style="color:#88c0d0">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain"></span><span class="token keyword" style="color:#ebcb8b">const</span><span class="token plain"> recipient </span><span class="token operator" style="color:#bf616a">=</span><span class="token plain"> </span><span class="token function" style="color:#bf616a">prompt</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token string" style="color:#88c0d0">&quot;Enter BTC recipient:&quot;</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token punctuation" style="color:#88c0d0">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain"></span><span class="token keyword" style="color:#ebcb8b">const</span><span class="token plain"> amount </span><span class="token operator" style="color:#bf616a">=</span><span class="token plain"> balance</span><span class="token punctuation" style="color:#88c0d0">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain"></span><span class="token keyword" style="color:#ebcb8b">const</span><span class="token plain"> burnAndRelease </span><span class="token operator" style="color:#bf616a">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#ebcb8b">await</span><span class="token plain"> renJS</span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token method function property-access" style="color:#bf616a">burnAndRelease</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token punctuation" style="color:#88c0d0">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">  </span><span class="token comment" style="color:#6b7282">// Send BTC from Ethereum back to the Bitcoin blockchain.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">  asset</span><span class="token operator" style="color:#bf616a">:</span><span class="token plain"> </span><span class="token string" style="color:#88c0d0">&quot;BTC&quot;</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">  to</span><span class="token operator" style="color:#bf616a">:</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#bf616a">Bitcoin</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token method function property-access maybe-class-name" style="color:#bf616a">Address</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token plain">recipient</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">  </span><span class="token keyword module" style="color:#ebcb8b">from</span><span class="token operator" style="color:#bf616a">:</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#bf616a">Ethereum</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token plain">web3</span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token property-access">currentProvider</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token method function property-access maybe-class-name" style="color:#bf616a">Contract</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token plain">btcAddress</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#bf616a">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token punctuation" style="color:#88c0d0">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    sendTo</span><span class="token operator" style="color:#bf616a">:</span><span class="token plain"> contractAddress</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    contractFn</span><span class="token operator" style="color:#bf616a">:</span><span class="token plain"> </span><span class="token string" style="color:#88c0d0">&quot;withdraw&quot;</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    contractParams</span><span class="token operator" style="color:#bf616a">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#88c0d0">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">      </span><span class="token punctuation" style="color:#88c0d0">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">        type</span><span class="token operator" style="color:#bf616a">:</span><span class="token plain"> </span><span class="token string" style="color:#88c0d0">&quot;bytes&quot;</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">        name</span><span class="token operator" style="color:#bf616a">:</span><span class="token plain"> </span><span class="token string" style="color:#88c0d0">&quot;_msg&quot;</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">        value</span><span class="token operator" style="color:#bf616a">:</span><span class="token plain"> </span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token keyword module" style="color:#ebcb8b">from</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token template-string template-punctuation string" style="color:#88c0d0">`</span><span class="token template-string string" style="color:#88c0d0">Withdrawing </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">${</span><span class="token template-string interpolation">amount</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">}</span><span class="token template-string string" style="color:#88c0d0"> BTC</span><span class="token template-string template-punctuation string" style="color:#88c0d0">`</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">      </span><span class="token punctuation" style="color:#88c0d0">}</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">      </span><span class="token punctuation" style="color:#88c0d0">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">        type</span><span class="token operator" style="color:#bf616a">:</span><span class="token plain"> </span><span class="token string" style="color:#88c0d0">&quot;bytes&quot;</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">        name</span><span class="token operator" style="color:#bf616a">:</span><span class="token plain"> </span><span class="token string" style="color:#88c0d0">&quot;_to&quot;</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">        value</span><span class="token operator" style="color:#bf616a">:</span><span class="token plain"> btcAddress</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">      </span><span class="token punctuation" style="color:#88c0d0">}</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">      </span><span class="token punctuation" style="color:#88c0d0">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">        type</span><span class="token operator" style="color:#bf616a">:</span><span class="token plain"> </span><span class="token string" style="color:#88c0d0">&quot;uint256&quot;</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">        name</span><span class="token operator" style="color:#bf616a">:</span><span class="token plain"> </span><span class="token string" style="color:#88c0d0">&quot;_amount&quot;</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">        value</span><span class="token operator" style="color:#bf616a">:</span><span class="token plain"> </span><span class="token maybe-class-name">RenJS</span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token property-access">utils</span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token method function property-access" style="color:#bf616a">toSmallestUnit</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token plain">amount</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"> </span><span class="token number" style="color:#b48ead">8</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">      </span><span class="token punctuation" style="color:#88c0d0">}</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    </span><span class="token punctuation" style="color:#88c0d0">]</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">  </span><span class="token punctuation" style="color:#88c0d0">}</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain"></span><span class="token punctuation" style="color:#88c0d0">}</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token punctuation" style="color:#88c0d0">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain"></span><span class="token keyword" style="color:#ebcb8b">let</span><span class="token plain"> confirmations </span><span class="token operator" style="color:#bf616a">=</span><span class="token plain"> </span><span class="token number" style="color:#b48ead">0</span><span class="token punctuation" style="color:#88c0d0">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain"></span><span class="token keyword control-flow" style="color:#ebcb8b">await</span><span class="token plain"> burnAndRelease</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">  </span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token method function property-access" style="color:#bf616a">burn</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">  </span><span class="token comment" style="color:#6b7282">// Ethereum transaction confirmations.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">  </span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token method function property-access" style="color:#bf616a">on</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token string" style="color:#88c0d0">&quot;confirmation&quot;</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token plain">confs</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#bf616a">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#88c0d0">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    confirmations </span><span class="token operator" style="color:#bf616a">=</span><span class="token plain"> confs</span><span class="token punctuation" style="color:#88c0d0">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">  </span><span class="token punctuation" style="color:#88c0d0">}</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">  </span><span class="token comment" style="color:#6b7282">// Print Ethereum transaction hash.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">  </span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token method function property-access" style="color:#bf616a">on</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token string" style="color:#88c0d0">&quot;transactionHash&quot;</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token plain">txHash</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#bf616a">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#ebcb8b">this</span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token method function property-access" style="color:#bf616a">log</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token template-string template-punctuation string" style="color:#88c0d0">`</span><span class="token template-string string" style="color:#88c0d0">txHash: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">${</span><span class="token template-string interpolation known-class-name class-name" style="color:#bf616a">String</span><span class="token template-string interpolation punctuation" style="color:#88c0d0">(</span><span class="token template-string interpolation">txHash</span><span class="token template-string interpolation punctuation" style="color:#88c0d0">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">}</span><span class="token template-string template-punctuation string" style="color:#88c0d0">`</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token punctuation" style="color:#88c0d0">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain"></span><span class="token keyword control-flow" style="color:#ebcb8b">await</span><span class="token plain"> burnAndRelease</span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">  </span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token method function property-access" style="color:#bf616a">release</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">  </span><span class="token comment" style="color:#6b7282">// Print RenVM status - &quot;pending&quot;, &quot;confirming&quot; or &quot;done&quot;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">  </span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token method function property-access" style="color:#bf616a">on</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token string" style="color:#88c0d0">&quot;status&quot;</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token plain">status</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#bf616a">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">    status </span><span class="token operator" style="color:#bf616a">===</span><span class="token plain"> </span><span class="token string" style="color:#88c0d0">&quot;confirming&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">      </span><span class="token operator" style="color:#bf616a">?</span><span class="token plain"> </span><span class="token keyword" style="color:#ebcb8b">this</span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token method function property-access" style="color:#bf616a">log</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token template-string template-punctuation string" style="color:#88c0d0">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">${</span><span class="token template-string interpolation">status</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">}</span><span class="token template-string string" style="color:#88c0d0"> (</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">${</span><span class="token template-string interpolation">confirmations</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">}</span><span class="token template-string string" style="color:#88c0d0">/15)</span><span class="token template-string template-punctuation string" style="color:#88c0d0">`</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">      </span><span class="token operator" style="color:#bf616a">:</span><span class="token plain"> </span><span class="token keyword" style="color:#ebcb8b">this</span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token method function property-access" style="color:#bf616a">log</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token plain">status</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">  </span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">  </span><span class="token comment" style="color:#6b7282">// Print RenVM transaction hash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain">  </span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token method function property-access" style="color:#bf616a">on</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token string" style="color:#88c0d0">&quot;txHash&quot;</span><span class="token punctuation" style="color:#88c0d0">,</span><span class="token plain"> </span><span class="token keyword" style="color:#ebcb8b">this</span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token property-access">log</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token punctuation" style="color:#88c0d0">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain"></span><span class="token keyword" style="color:#ebcb8b">this</span><span class="token punctuation" style="color:#88c0d0">.</span><span class="token method function property-access" style="color:#bf616a">log</span><span class="token punctuation" style="color:#88c0d0">(</span><span class="token template-string template-punctuation string" style="color:#88c0d0">`</span><span class="token template-string string" style="color:#88c0d0">Withdrew </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">${</span><span class="token template-string interpolation">amount</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">}</span><span class="token template-string string" style="color:#88c0d0"> BTC to </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">${</span><span class="token template-string interpolation">recipient</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#88c0d0">}</span><span class="token template-string string" style="color:#88c0d0">.</span><span class="token template-string template-punctuation string" style="color:#88c0d0">`</span><span class="token punctuation" style="color:#88c0d0">)</span><span class="token punctuation" style="color:#88c0d0">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d7dde8"><span class="token plain"></span><span class="token decorator at operator" style="color:#bf616a">@</span><span class="token decorator function" style="color:#bf616a">terrafirmatrekker</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If you want to try the Bridge out yourself, you will need some test ether and testBTC. Run the dapp locally in your browser if you haven’t already and try it out! Once the mint is done you should be able to see testBTC in your MetaMask wallet. Just make sure to add the token to Metamask. To do so, make sure you are on Kovan Test Network in Metamask and then go to “Assets” and then Click “Add Token”. Paste in the Kovan renBTC address (you can find it<a href="https://renproject.github.io/ren-client-docs/contracts/deployments/%29" target="_blank" rel="noopener noreferrer"> here</a> — make sure you’ve chosen Ethereum and Testnet, and then copy the ERC20 address under testBTC.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="conclusion-"><strong>Conclusion </strong><a class="hash-link" href="#conclusion-" title="Direct link to heading">​</a></h3><p>Wow, we have made some tremendous progress from the beginning of this tutorial! We have created a smart contract that allows users to buy and sell products on Ethereum. Finally, we integrated with RenJS in order to interact with RenVM so users can “convert” BTC to renBTC (ERC20)through a lockAndMint. There are still a few missing pieces of the puzzle that I leave up to you.</p><p>Firstly, how can we modify our smart contract and front-end to allow users to shop with renBTC in lieu of Ethereum? We could possibly price the items in renBTC but that leaves a lot of users in the dark, we could also swap the renBTC for Ethers through a number of “third-party” dapps. We could also use the renBTC balance inside of the contract, like a store balance/credit, so that you don’t have to worry about approvals. Like when a user mints renBTC, it stays in the contract, but it gets stored in a map from the user’s address to their balance. I am curious about which method you choose to implement! Send me your ideas and implementations, we want to see what you create!</p><p>Thanks for reading my tutorial, feel free to reach out to me with any questions, concerns, or modifications you have made to the dapp. Also, feel free to join Ren’s<a href="https://t.me/joinchat/xED0D5pCfVI1YWU5" target="_blank" rel="noopener noreferrer"> telegram</a> to ask technical questions and to learn more about the ecosystem and protocol. Remember, things are only impossible until they’re not! There is so much to #buidl show us what you dream up!</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_xD8n"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/ren-client-docs/blog/tags/ren-vm">RenVM</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/ren-client-docs/blog/tags/ren-js">RenJS</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/ren-client-docs/blog/tags/dapp">dapp</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/ren-client-docs/blog/tags/tutorial">tutorial</a></li></ul></div></footer></article></main><div class="col col--2"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#part-1-getting-started" class="table-of-contents__link toc-highlight"><strong>Part 1: Getting Started</strong></a></li><li><a href="#-part-2-smart-contracts" class="table-of-contents__link toc-highlight"><strong> Part 2: Smart Contracts</strong></a></li><li><a href="#part-2-interacting-with-renvm" class="table-of-contents__link toc-highlight"><strong>Part 2: Interacting with RenVM</strong></a></li><li><a href="#part-3-integrating-with-renjs" class="table-of-contents__link toc-highlight"><strong>Part 3: Integrating with RenJS</strong></a></li><li><a href="#conclusion-" class="table-of-contents__link toc-highlight"><strong>Conclusion </strong></a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">RenVM</div><ul class="footer__items"><li class="footer__item"><a href="https://renproject.io" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>renproject.io<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://mainnet.renproject.io" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Command Center<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://explorer.renproject.io" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Explorer<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items"><li class="footer__item"><a href="https://t.me/renproject" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/renproject" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/ren-client-docs/assets/js/runtime~main.7076c633.js"></script>
<script src="/ren-client-docs/assets/js/main.26a0c57c.js"></script>
</body>
</html>